{
  "cases": [
    {
      "id": "basic_mix_divider",
      "description": "Three chunk lists mixed in canonical order without delimiter injection.",
      "random": 0,
      "state": {
        "mixes": [
          {
            "type": "mix",
            "title": "Mix A",
            "limit": 6,
            "exact": false,
            "preserve": true,
            "randomize": false,
            "delimiter": { "mode": "whitespace", "size": 1 },
            "children": [
              { "type": "chunk", "text": "a ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
              { "type": "chunk", "text": "b ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
              { "type": "chunk", "text": "d ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } }
            ]
          }
        ]
      }
    },
    {
      "id": "random_mix_order",
      "description": "Mix randomizes list order every cycle.",
      "random": 0,
      "state": {
        "mixes": [
          {
            "type": "mix",
            "title": "Mix A",
            "limit": 6,
            "exact": false,
            "preserve": true,
            "randomize": true,
            "delimiter": { "mode": "whitespace", "size": 1 },
            "children": [
              { "type": "chunk", "text": "a ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
              { "type": "chunk", "text": "b ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
              { "type": "chunk", "text": "c ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } }
            ]
          }
        ]
      }
    },
    {
      "id": "exact_length_trim",
      "description": "Exact length trims the final chunk rather than injecting new delimiters.",
      "random": 0,
      "state": {
        "mixes": [
          {
            "type": "mix",
            "title": "Mix A",
            "limit": 5,
            "exact": true,
            "preserve": true,
            "randomize": false,
            "delimiter": { "mode": "whitespace", "size": 1 },
            "children": [
              { "type": "chunk", "text": "abc ", "limit": 5, "exact": true, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } }
            ]
          }
        ]
      }
    },
    {
      "id": "nested_rechunk",
      "description": "Nested mix uses rechunked output when preserve chunking is off.",
      "random": 0,
      "state": {
        "mixes": [
          {
            "type": "mix",
            "title": "Outer",
            "limit": 6,
            "exact": false,
            "preserve": true,
            "randomize": false,
            "delimiter": { "mode": "whitespace", "size": 1 },
            "children": [
              {
                "type": "mix",
                "title": "Inner",
                "limit": 4,
                "exact": false,
                "preserve": false,
                "randomize": false,
                "delimiter": { "mode": "whitespace", "size": 2 },
                "children": [
                  { "type": "chunk", "text": "a ", "limit": 4, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
                  { "type": "chunk", "text": "b ", "limit": 4, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } }
                ]
              },
              { "type": "chunk", "text": "x ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } }
            ]
          }
        ]
      }
    },
    {
      "id": "variable_reference",
      "description": "Variable nodes reference an existing string or mix and pass its chunks unchanged.",
      "random": 0,
      "state": {
        "mixes": [
          {
            "type": "mix",
            "id": "mix-main",
            "title": "Main",
            "limit": 6,
            "exact": false,
            "preserve": true,
            "randomize": false,
            "delimiter": { "mode": "whitespace", "size": 1 },
            "children": [
              { "type": "chunk", "id": "chunk-a", "text": "a ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
              { "type": "chunk", "id": "chunk-b", "text": "b ", "limit": 6, "exact": false, "randomize": false, "delimiter": { "mode": "whitespace", "size": 1 } },
              { "type": "variable", "id": "var-1", "targetId": "chunk-b" }
            ]
          }
        ]
      }
    }
  ]
}
